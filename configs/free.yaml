# SmartMoney Bot - Free Tier Configuration
# This config is loaded on startup and defines all bot behavior

bot:
  tier: "free"
  version: "1.0.0"
  name: "SmartMoney Free Bot"

telegram:
  # Send startup message to group when bot starts
  startup_message: true
  # Send shutdown message when maintenance begins
  shutdown_message: true

# Symbols to monitor (free tier: BTCUSDT only)
symbols:
  - name: "BTCUSDT"
    timeframes: ["1h", "4h", "1d", "1w", "1M"]
  - name : "PAXGUSDT"
    timeframes: ["1h", "4h", "1d", "1w", "1M"]


# Historical data backfill on startup
backfill:
  enabled: true
  candles_per_timeframe: 200

# Technical indicators configuration
indicators:
  rsi:
    enabled: true
    period: 14
    # Normal thresholds
    overbought: 70
    oversold: 30
    # Extreme thresholds (detect market extremes: >=75 overbought, <=25 oversold)
    # These generate higher-priority alerts (ðŸš¨ðŸ”´ vs ðŸ”´)
    extreme_overbought: 77
    extreme_oversold: 23
    # Recovery zone: RSI values that reset alert state (prevents spam on reversals)
    # When RSI enters this zone, state is reset allowing new alerts on next condition change
    recovery_zone:
      lower: 40   # Lower bound: RSI must cross above this to reset oversold state
      upper: 60   # Upper bound: RSI must cross below this to reset overbought state
    # Timeframes to calculate RSI for (subset of symbol timeframes)
    timeframes: ["1h", "4h", "1d", "1w", "1M"]
    # Alert when RSI touches threshold (during candle, not only on close)
    # This catches extreme moments even if candle recovers before closing
    alert_on_touch: true

  breakout:
    enabled: true
    # Only monitor breakouts on daily and weekly
    timeframes: ["1h", "4h", "1d", "1w", "1M"]
    # Margin to avoid false positives (0.1% = 0.001)
    margin_percent: 0.15
    # Alert immediately when price touches level (not on close)
    alert_on_touch: true

  divergence:
    enabled: true
    # Timeframes to detect RSI divergence (bullish/bearish pivots)
    timeframes: ["1h", "4h", "1d", "1w", "1M"]
    # Number of candles to scan on startup
    lookback: 40
    # Enable verbose logging for divergence detection
    debug_divergence: false
    # RSI thresholds for divergence detection
    bullish_rsi_max: 40   # Divergencia bullish apenas se RSI < 40
    bearish_rsi_min: 60   # Divergencia bearish apenas se RSI > 60

# Alert configuration
alerts:
  # Language and locale
  language: "pt-BR"
  # Timezone for timestamps (BRT = UTC-3)
  timezone: "America/Sao_Paulo"

  # Consolidate multiple timeframe alerts into one message
  # DISABLED: Redundant with 6s consolidation window (mega-alerts already show multi-TF)
  consolidate_multi_tf: false

  # Circuit breaker for extreme volatility
  circuit_breaker:
    enabled: true
    # If more than N alerts in 1 minute, consolidate
    max_alerts_per_minute: 5

  # Throttling to prevent spam
  throttling:
    enabled: true
    max_alerts_per_hour: 20

  # Daily summary: Fear & Greed Index + RSI 1D/1W/1M
  daily_summary:
    enabled: true
    # Time to send summary in BRT (21:01 BRT = 1 minute after candle closes)
    send_time_brt: "21:05"
    # Tolerance window in minutes (allows summary to send within Â±N minutes of scheduled time)
    send_window_minutes: 1

  # Don't send alerts for conditions that happened while bot was offline
  skip_retroactive_alerts: true

# Database maintenance
database:
  cleanup:
    enabled: true
    # Cron schedule: Daily at 3AM UTC
    schedule: "0 3 * * *"
    # Delete candles older than N days
    retention_days: 90
    # But always keep at least N candles per timeframe
    min_candles_per_tf: 200

# Logging configuration
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  # Structured JSON logs for parsing
  format: "json"
  # Log rotation
  rotation:
    max_bytes: 10485760  # 10 MB
    backup_count: 7      # Keep 7 files (70 MB total)
